---
import Button from './ui/Button.astro';
---

<nav id="navbar" class="fixed top-0 left-0 right-0 z-50 py-2 transition-all duration-300" style="background-color: transparent;">
	<div class="max-w-7xl mx-auto flex items-center justify-between px-4 md:px-6 py-4">
		<div class="flex-shrink-0">
			<a href="#hero">
				<img id="navbar-logo" src="/assets/images/scaliny logo.png" alt="SCALINY Logo" class="h-10 md:h-14 transition-all duration-300 hover:scale-110 cursor-pointer" />
			</a>
		</div>
		
		<!-- Desktop Navigation -->
		<ul class="hidden lg:flex items-center gap-8 flex-1 justify-center">
			<li><a href="#services" class="nav-link text-white hover:text-[#31906A] transition-colors duration-300">Services</a></li>
			<li><a href="#results" class="nav-link text-white hover:text-[#31906A] transition-colors duration-300">Results</a></li>
			<li><a href="#about" class="nav-link text-white hover:text-[#31906A] transition-colors duration-300">About</a></li>
			<li><a href="#testimonials" class="nav-link text-white hover:text-[#31906A] transition-colors duration-300">Testimonials</a></li>
			<li><a href="#contact" class="nav-link text-white hover:text-[#31906A] transition-colors duration-300">Contact</a></li>
		</ul>
		
		<!-- Desktop CTA Button -->
		<div class="hidden lg:flex flex-shrink-0">
			<Button>
				<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
					<path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" />
				</svg>
				Free Consultation
			</Button>
		</div>
		
		<!-- Mobile Hamburger Button -->
		<button id="mobile-menu-button" class="lg:hidden p-2 hamburger-icon" style="color: white;">
			<svg id="menu-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 hamburger-icon">
				<path stroke-linecap="round" stroke-linejoin="round" d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5" />
			</svg>
			<svg id="close-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="w-6 h-6 hidden hamburger-icon">
				<path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12" />
			</svg>
		</button>
	</div>
	
	<!-- Mobile Menu -->
	<div id="mobile-menu" class="hidden lg:hidden fixed inset-0 z-50 flex items-center justify-center" style="background-color: #0F1419;">
		<ul class="flex flex-col items-center gap-6 px-4 w-full">
			<li><a href="#services" class="nav-link text-white hover:text-[#31906A] transition-colors duration-300 text-xl font-semibold">Services</a></li>
			<li><a href="#results" class="nav-link text-white hover:text-[#31906A] transition-colors duration-300 text-xl font-semibold">Results</a></li>
			<li><a href="#about" class="nav-link text-white hover:text-[#31906A] transition-colors duration-300 text-xl font-semibold">About</a></li>
			<li><a href="#testimonials" class="nav-link text-white hover:text-[#31906A] transition-colors duration-300 text-xl font-semibold">Testimonials</a></li>
			<li><a href="#contact" class="nav-link text-white hover:text-[#31906A] transition-colors duration-300 text-xl font-semibold">Contact</a></li>
			<li class="w-full max-w-xs mt-4">
				<Button class="w-full">
					<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
						<path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" />
					</svg>
					Free Consultation
				</Button>
			</li>
		</ul>
	</div>
</nav>

<script>
	// Navbar scroll effect
	const navbar = document.getElementById('navbar');
	const navLinks = document.querySelectorAll('.nav-link');
	
	window.addEventListener('scroll', function() {
		const logo = document.getElementById('navbar-logo');
		const hamburgerIcons = document.querySelectorAll('.hamburger-icon');
		const mobileMenu = document.getElementById('mobile-menu');
		if (window.scrollY > 50) {
			navbar.style.backgroundColor = '#ffffff';
			if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
				mobileMenu.style.backgroundColor = '#ffffff';
			}
			if (logo) {
				logo.style.filter = 'brightness(0)';
			}
			hamburgerIcons.forEach(icon => {
				icon.style.color = '#31906A';
			});
			navLinks.forEach(link => {
				link.classList.remove('text-white');
				link.classList.add('text-gray-800');
			});
		} else {
			navbar.style.backgroundColor = 'transparent';
			if (mobileMenu && !mobileMenu.classList.contains('hidden')) {
				mobileMenu.style.backgroundColor = '#0F1419';
			}
			if (logo) {
				logo.style.filter = 'brightness(1)';
			}
			hamburgerIcons.forEach(icon => {
				icon.style.color = 'white';
			});
			navLinks.forEach(link => {
				link.classList.remove('text-gray-800');
				link.classList.add('text-white');
			});
		}
	});
	
	// Mobile menu toggle
	const mobileMenuButton = document.getElementById('mobile-menu-button');
	const mobileMenu = document.getElementById('mobile-menu');
	const menuIcon = document.getElementById('menu-icon');
	const closeIcon = document.getElementById('close-icon');
	
	if (mobileMenuButton) {
		mobileMenuButton.addEventListener('click', function() {
			const isHidden = mobileMenu.classList.contains('hidden');
			mobileMenu.classList.toggle('hidden');
			menuIcon.classList.toggle('hidden');
			closeIcon.classList.toggle('hidden');
			
			// Prevent body scroll when menu is open
			if (isHidden) {
				document.body.style.overflow = 'hidden';
				// Update background color and link colors based on scroll position
				const mobileMenuLinks = mobileMenu.querySelectorAll('.nav-link');
				if (window.scrollY > 50) {
					mobileMenu.style.backgroundColor = '#ffffff';
					mobileMenuLinks.forEach(link => {
						link.classList.remove('text-white');
						link.classList.add('text-gray-800');
					});
				} else {
					mobileMenu.style.backgroundColor = '#0F1419';
					mobileMenuLinks.forEach(link => {
						link.classList.remove('text-gray-800');
						link.classList.add('text-white');
					});
				}
			} else {
				document.body.style.overflow = '';
			}
		});
	}
	
	// Close menu and restore scroll when clicking outside
	if (mobileMenu) {
		mobileMenu.addEventListener('click', function(e) {
			if (e.target === mobileMenu) {
				mobileMenu.classList.add('hidden');
				menuIcon.classList.remove('hidden');
				closeIcon.classList.add('hidden');
				document.body.style.overflow = '';
			}
		});
		
		// Close mobile menu when clicking on a link
		const mobileLinks = mobileMenu.querySelectorAll('a');
		mobileLinks.forEach(link => {
			link.addEventListener('click', function() {
				mobileMenu.classList.add('hidden');
				menuIcon.classList.remove('hidden');
				closeIcon.classList.add('hidden');
				document.body.style.overflow = '';
			});
		});
	}
</script>
